(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[507],{8086:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var o=r(n(4938)),i=n(5893),c=(0,o.default)((0,i.jsx)("path",{d:"m16.81 8.94-3.75-3.75L4 14.25V18h3.75l9.06-9.06zM6 16v-.92l7.06-7.06.92.92L6.92 16H6zm13.71-9.96c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83zM2 20h20v4H2z"}),"BorderColorOutlined");t.Z=c},619:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var o=r(n(4938)),i=n(5893),c=(0,o.default)((0,i.jsx)("path",{d:"M12 3c-4.97 0-9 4.03-9 9v7c0 1.1.9 2 2 2h4v-8H5v-1c0-3.87 3.13-7 7-7s7 3.13 7 7v1h-4v8h4c1.1 0 2-.9 2-2v-7c0-4.97-4.03-9-9-9z"}),"Headphones");t.Z=c},1605:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/discoveries/[id]",function(){return n(8923)}])},8923:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return z},default:function(){return H}});var r=n(5893),o=n(4051),i=n.n(o),c=n(7294),a=n(5617),s=n(7010),l=n(9006),u=n(1163),d=n(1664),x=n(7357),p=n(9661),h=n(5861),f=n(3538),v=n(7720),m=n(3321),b=n(4054),g=n(89),w=n(1737),j=n(8086),y=n(619),Z=n(5273),k=n(8210),_=n(7426),D=n(9061),M=n(2055);function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t,n,r,o,i,c){try{var a=e[i](c),s=a.value}catch(l){return void n(l)}a.done?t(s):Promise.resolve(s).then(r,o)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){S(i,r,o,c,a,"next",e)}function a(e){S(i,r,o,c,a,"throw",e)}c(void 0)}))}}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){I(e,t,n[t])}))}return e}function G(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var T=function(e){var t=e.data,n=e.api,o=e.updateLike,s=e.commentInputRef,u=e.user,d=(0,c.useState)(!1),v=d[0],m=d[1],b=(0,c.useState)(""),g=b[0],w=b[1],j=(0,a.I0)(),y=function(){var e=O(i().mark((function e(t){var r,c,a,s,d,x,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=3;break}return j((0,l.e8)(!0)),e.abrupt("return");case 3:return e.prev=3,e.next=6,n.likeComment(t);case 6:return r=e.sent,e.next=9,r.data;case 9:if(!(c=e.sent).error){e.next=13;break}return m(!0),e.abrupt("return");case 13:o(c.data),e.next=27;break;case 16:if(e.prev=16,e.t0=e.catch(3),!X(a=e.t0.response.data.error,Object)){e.next=25;break}for(d in s="",a)x=Object.keys(a[d])[0],p=a[d][x],s+="".concat(p," \n");return w(s),m(!0),e.abrupt("return");case 25:w(a),m(!0);case 27:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}();return(0,r.jsxs)(x.Z,{id:"comment-".concat(t.id),sx:C({},(0,k.X)("flex-start","flex-start"),{columnGap:"11px"}),children:[(0,r.jsx)(x.Z,{children:(0,r.jsx)(p.Z,{sx:{width:"35px",height:"35px"},alt:"img alt",src:t.user?t.user.avatar.thumb_url:""})}),(0,r.jsxs)(x.Z,{sx:C({},(0,k.X)("center","flex-starrt"),{flexDirection:"column",rowGap:"15px",width:"100%",overflowWrap:"anywhere",wordBreak:"break-word",whiteSpace:"pre-line"}),children:[(0,r.jsxs)(x.Z,{sx:C({},(0,k.X)("center","flex-start"),{flexDirection:"column",rowGap:"8px",padding:"15px",bgcolor:_.DM.bg2,borderRadius:"10px"}),children:[t.user&&(0,r.jsxs)(h.Z,{sx:C({},_.gN.title1,{color:_.DM.white}),children:[t.user.first_name," ",t.user.last_name]}),(0,r.jsx)(h.Z,{style:C({},_.gN.content1,{color:_.DM.VZ_Text_content}),children:t.content})]}),(0,r.jsxs)(x.Z,{sx:C({},(0,k.X)("flex-start","center"),{columnGap:"31px"}),children:[(0,r.jsxs)(x.Z,{sx:C({},(0,k.X)("center","center"),{columnGap:"8px",cursor:"pointer"}),children:[(0,r.jsx)(Z.sv,{bgfill:_.DM.contentIcon,fill:_.DM.contentIcon}),(0,r.jsx)(h.Z,{onClick:function(){u?s.current.children[1].focus():j((0,l.e8)(!0))},sx:C({},_.gN.content3,{color:_.DM.contentIcon}),children:"Tr\u1ea3 l\u1eddi"})]}),(0,r.jsxs)(x.Z,{sx:C({},(0,k.X)("center","center"),{columnGap:"8px",cursor:"pointer"}),onClick:function(){y(t.id)},children:[(0,r.jsx)(Z.mN,{bgfill:t.is_liked?_.DM.main:_.DM.white,fill:t.is_liked?_.DM.main:_.DM.white}),(0,r.jsx)(h.Z,{sx:C({},_.gN.content3,{color:_.DM.contentIcon}),children:t.comment_likes_count})]}),(0,r.jsx)(x.Z,{sx:C({},(0,k.X)("center","center"),{columnGap:"8px"}),children:(0,r.jsx)(h.Z,{sx:C({},_.gN.content3,{color:_.DM.contentIcon}),children:t.published_at})})]})]}),(0,r.jsx)(f.Z,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:v,onClose:function(){m(!1)},message:g},"bottomcenter")]})};function E(e){var t,n,o,N,S,I,E,z=e.discovery,H=new M.Z,P=(0,D.Z)(),A=(0,c.useRef)(),R=(0,a.v9)(s.dy),L=(0,c.useState)(z),W=L[0],F=L[1],U=(0,c.useState)([]),V=U[0],B=U[1],$=(0,c.useState)(""),q=$[0],K=$[1],J=(0,c.useState)(1),Q=J[0],Y=J[1],ee=(0,c.useState)(!1),te=ee[0],ne=ee[1],re=(0,c.useState)(""),oe=re[0],ie=re[1],ce=(0,c.useState)(!1),ae=ce[0],se=ce[1],le=(0,u.useRouter)().query.id,ue=(0,a.I0)(),de=P.width<=_.nN.sm,xe=de?200:380;function pe(){return he.apply(this,arguments)}function he(){return(he=O(i().mark((function e(){var t,n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.getDiscoveryComment(le,Q);case 3:return t=e.sent,e.next=6,t.data.data;case 6:n=e.sent,r=G(V).concat(G(n)),B(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}(0,c.useEffect)((function(){pe()}),[Q]),(0,c.useEffect)((function(){R&&se(!1)}),[R]);var fe=function(){var e=O(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(13!==t.keyCode||!q){e.next=4;break}return e.next=4,ge(W.id,{content:q});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=O(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!q){e.next=3;break}return e.next=3,ge(W.id,{content:q});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(e){var t=G(V),n=t.findIndex((function(t){return t.id===e.id}));t[n]=e,B(t)},be=function(e){var t=C({},W);t.discovery_counter.comments_count=W.discovery_counter.comments_count+1,F(C({},t)),B([e].concat(G(V)))};function ge(e,t){return we.apply(this,arguments)}function we(){return(we=O(i().mark((function e(t,n){var r,o,c,a,s,u,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R){e.next=4;break}return ue((0,l.e8)(!0)),K(""),e.abrupt("return");case 4:return e.prev=4,e.next=7,H.commentDiscovery(t,n);case 7:return r=e.sent,e.next=10,r.data;case 10:if(!(o=e.sent).error){e.next=15;break}return ne(!0),console.log(o.error),e.abrupt("return");case 15:be(o.data),K(""),window.location.href="".concat(window.location.origin).concat(window.location.pathname,"#comment-").concat(o.data.id),e.next=32;break;case 20:if(e.prev=20,e.t0=e.catch(4),K(""),!X(c=e.t0.response.data.error,Object)){e.next=30;break}for(s in a="",c)u=Object.keys(c[s])[0],d=c[s][u],a+="".concat(d," \n");return ie(a),ne(!0),e.abrupt("return");case 30:ie(c),ne(!0);case 32:case"end":return e.stop()}}),e,null,[[4,20]])})))).apply(this,arguments)}var je=function(e){var t=C({},W);t.discovery_counter.likes_count=e.likes_count,t.is_liked=!t.is_liked,F(t)},ye=function(){var e=O(i().mark((function e(){var t,n,r,o,c,a,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R){e.next=3;break}return ue((0,l.e8)(!0)),e.abrupt("return");case 3:return e.prev=3,e.next=6,H.likeDiscovery(le);case 6:return t=e.sent,e.next=9,t.data;case 9:if(!(n=e.sent).error){e.next=13;break}return setIsLikeError(!0),e.abrupt("return");case 13:je(n.data),e.next=27;break;case 16:if(e.prev=16,e.t0=e.catch(3),!X(r=e.t0.response.data.error,Object)){e.next=25;break}for(c in o="",r)a=Object.keys(r[c])[0],s=r[c][a],o+="".concat(s," \n");return ie(o),ne(!0),e.abrupt("return");case 25:ie(r),ne(!0);case 27:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(){return e.apply(this,arguments)}}();return(0,r.jsxs)(x.Z,{sx:C({},(0,k.X)("center","center"),{flexDirection:"column"}),children:[(0,r.jsx)(x.Z,{sx:{height:"".concat(xe,"px"),width:"100%",top:0},children:(0,r.jsx)("img",{style:{objectFit:"cover",width:"100%",height:"100%",left:0},alt:"cover img alt",src:null===W||void 0===W||null===(t=W.image)||void 0===t?void 0:t.original_url})}),(0,r.jsx)(x.Z,{sx:{width:"100%",bgcolor:_.DM.bg2},children:(0,r.jsxs)(x.Z,{sx:{width:de?"90%":"60%",margin:"0 auto"},children:[(0,r.jsxs)(x.Z,{sx:C({},(0,k.X)("flex-start","center"),{columnGap:"16px",margin:de?"24px 0 16px 0":"24px 0"}),children:[(0,r.jsx)(x.Z,{children:(0,r.jsx)(p.Z,{sx:{width:"48px",height:"48px"},alt:"discovery avt alt",src:null===W||void 0===W||null===(n=W.channel)||void 0===n||null===(o=n.avatar)||void 0===o?void 0:o.thumb_url})}),(0,r.jsxs)(x.Z,{sx:C({},(0,k.X)("center","flex-start"),{flexDirection:"column",rowGap:"6px"}),children:[(0,r.jsx)(h.Z,{sx:C({},_.gN.h3,{color:_.DM.white}),children:null===W||void 0===W||null===(N=W.channel)||void 0===N?void 0:N.name}),(0,r.jsx)(h.Z,{sx:C({},_.gN.content2,{color:_.DM.contentIcon}),children:null===W||void 0===W?void 0:W.published_at})]})]}),(0,r.jsx)(v.Z,{sx:{border:"1px solid ".concat(_.DM.blackStroker),mb:de?"16px":"24px"}}),(0,r.jsx)(h.Z,{sx:C({},de?_.gN.content2:_.gN.content1,{color:_.DM.white,mb:de?"19px":"16px"}),children:null===W||void 0===W?void 0:W.summary})]})}),W.discovery_contents&&W.discovery_contents.map((function(e){var t,n;return(0,r.jsxs)(x.Z,{sx:{width:de?"90%":"60%",margin:"0 auto"},children:[(0,r.jsx)(h.Z,{sx:C({},de?_.gN.title1:_.gN.h2,{color:_.DM.white,margin:de?"33px auto 24px auto":"48px auto"}),children:null===e||void 0===e?void 0:e.title}),(0,r.jsxs)(x.Z,{sx:{height:"329px",width:"100%",top:0,position:"relative"},children:[(0,r.jsx)("img",{style:{objectFit:"cover",width:"100%",height:"100%",left:0},alt:"cover img alt",src:null===e||void 0===e||null===(t=e.avatar)||void 0===t?void 0:t.original_url}),(0,r.jsx)(d.default,{style:{textDecoration:"none"},href:"/playlists/".concat(null===e||void 0===e||null===(n=e.playlist)||void 0===n?void 0:n.id),children:(0,r.jsx)(m.Z,{sx:C({position:"absolute",bottom:"10px",right:"10px"},_.gN.title2,{color:_.DM.white,bgcolor:_.DM.main,textTransform:"none",height:"48px",width:"150px",borderRadius:"48px",":hover":{bgcolor:"rgb(56 57 68 / 93%)"}}),startIcon:(0,r.jsx)(y.Z,{sx:{color:_.DM.white}}),children:"Nghe s\xe1ch"})})]}),(0,r.jsx)(h.Z,{sx:C({},de?_.gN.content2:_.gN.content1,{color:_.DM.VZ_Text_content,margin:de?"23px auto 16px auto":"48px auto 32px auto",whiteSpace:"pre-wrap"}),children:null===e||void 0===e?void 0:e.content})]},null===e||void 0===e?void 0:e.id)})),(0,r.jsx)(x.Z,{sx:{width:de?"100%":"60%",margin:"0 auto"},children:(0,r.jsxs)(x.Z,{sx:C({bgcolor:_.DM.bg2,padding:de?"16px":"20px"},(0,k.X)("space-between","center"),{mb:de?"24px":"30px"}),children:[(0,r.jsxs)(x.Z,{id:"comment-area",sx:C({},(0,k.X)("center","center"),{columnGap:"8px"}),children:[(0,r.jsx)(Z.sv,{bgfill:_.DM.white,fill:_.DM.white}),(0,r.jsxs)(h.Z,{sx:C({},_.gN.content2,{color:_.DM.white}),children:[null===W||void 0===W||null===(S=W.discovery_counter)||void 0===S?void 0:S.comments_count," g\xf3p \xfd"]})]}),(0,r.jsxs)(x.Z,{sx:C({},(0,k.X)("center","center"),{columnGap:"8px"}),onClick:ye,children:[(0,r.jsx)(Z.mN,{bgfill:W.is_liked?_.DM.main:_.DM.white,fill:W.is_liked?_.DM.main:_.DM.white}),(0,r.jsxs)(h.Z,{sx:C({},_.gN.content2,{color:_.DM.white}),children:[null===W||void 0===W||null===(I=W.discovery_counter)||void 0===I?void 0:I.likes_count," th\xedch"]})]})]})}),(0,r.jsxs)(x.Z,{sx:{width:de?"90%":"60%",margin:"0 auto"},children:[(0,r.jsxs)(x.Z,{sx:C({},(0,k.X)("center","flex-start"),{flexDirection:"column",rowGap:"34px"}),children:[V.map((function(e){return(0,r.jsx)(T,{user:R,commentInputRef:A,updateLike:me,api:H,data:e},e.id)})),(0,r.jsx)(x.Z,{sx:C({width:"100%"},(0,k.X)("center","center")),children:(0,r.jsx)(m.Z,{onClick:function(){if(V.length<W.discovery_counter.comments_count){var e=Q+1;pe(e),Y(e)}},disabled:V.length>=(null===W||void 0===W||null===(E=W.discovery_counter)||void 0===E?void 0:E.comments_count),sx:C({textTransform:"none"},_.gN.title2,{color:_.DM.white,bgcolor:_.DM.main,width:"170px",height:"40px",borderRadius:"50px",":hover":{bgcolor:_.DM.main}}),children:"T\u1ea3i th\xeam g\xf3p \xfd"})})]}),(0,r.jsxs)(x.Z,{sx:C({},(0,k.X)("flex-start","center"),{columnGap:de?"16px":"31px",mt:"40px",maxWidth:"650px"}),children:[(0,r.jsx)(b.Z,{fullWidth:!0,variant:"standard",children:(0,r.jsx)(g.Z,{sx:{height:"40px",border:"1px solid ".concat(_.DM.placeHolder),color:_.DM.placeHolder,borderRadius:"24px",padding:"0 16px",boxSizing:"border-box","& .MuiInput-input":C({padding:"13px 16px"},_.gN.content2,{color:_.DM.white})},ref:A,disableUnderline:!0,id:"discovery-comment",value:q,placeholder:"G\u1eedi g\xf3p \xfd cho n\u1ed9i dung n\xe0y",onChange:function(e){if(R){var t=e.target.value;K(t)}},onKeyUp:fe,onClick:function(e){R||q||(ue((0,l.e8)(!0)),K(""),se(!0))},readOnly:ae,tabIndex:"-1",startAdornment:(0,r.jsx)(j.Z,{sx:{color:_.DM.placeHolder},position:"start",children:"$"})})}),(0,r.jsx)(m.Z,{onClick:ve,sx:{fontSize:"16px",lineHeight:"16px",fontWeight:600,fontFamily:"SF UI Display",fontStyle:"normal",color:_.DM.VZ_Text_content,textTransform:"none",p:0,minWidth:0},children:"G\u1eedi"})]})]}),(0,r.jsx)(f.Z,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:te,autoHideDuration:6e3,onClose:function(){ne(!1)},children:(0,r.jsx)(w.Z,{onClose:function(){ne(!1)},severity:"error",sx:{width:"100%"},children:oe})},"bottomcenter")]})}var z=!0,H=function(e){var t=e.discovery;return(0,r.jsx)(E,{discovery:t})}}},function(e){e.O(0,[774,888,179],(function(){return t=1605,e(e.s=t);var t}));var t=e.O();_N_E=t}]);